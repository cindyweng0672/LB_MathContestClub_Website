{% extends 'base.html' %}

{% block header %}
<h1>{% block title %}Daily Question{% endblock %}</h1>
{% endblock %}

{% block content %}
<link rel="stylesheet" href="../../static/datePicker/css/deskyCal.css" />
<script src="../../static/datePicker/js/deskycal.js"></script>
<script src="../../static/question.js"></script>

<div class="container">

  <div class="row" style="padding-top: 0.5em;">
    <div class="col-md-2">
      <span>
        Please select a date:
      </span>
    </div>
    <div class="col">
      <input id="datePicker" />
    </div>
  </div>
  <div class="row" style="padding-top: 0.5rem;">
    <div class="col-sm-2">
      {% block questionNavigator %}
      <div>
        {% for Qnum in range(1,totalQ) %}
        <ul id="tags">
          <li onclick="getListNum(this)"><a href="#">Question{{Qnum}}</a></li>
        </ul>
        {% endfor %}
      </div>
      {% endblock %}
    </div>
    <div class="col-sm-10">
      {% block imageDisplay %}
      <img id="question-img" alt="question image." style="width:80%; object-fit: contain; display:block;" />
      {% endblock %}
    </div>
  </div>
  {% block interaction %}
  <script>
    initDeskyCalendar(
      "datePicker",
      "single",
      null,
      null,
      null,
      null,
      null,
      null,
      date_picking_callback_basic
    );
    let now = new Date();
    date_picking_callback_basic(now);
    var date;
    function date_picking_callback_basic(d, n) {
      date = assembleDate(d);
      //------v
      fetchImage(date, 1, "question");
    }
  </script>
  {% endblock %}
</div>



{% block select %}
<script>
function getListNum(listItem) {
    const n = listItem.textContent.substring(8);
    fetchImage(date, n, "question")
    changeClass(listItem)
  }

  function changeClass(el) {
    var elements = document.getElementsByClassName('selected');
    for (i = 0; i < elements.length; i++) {
      elements[i].classList.remove('selected');
    }
    el.classList.add('selected');
  }
</script>
{% endblock %}
{% endblock %}